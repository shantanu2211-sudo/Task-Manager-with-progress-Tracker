<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Task Manager â€” Progress Tracker</title>

  <!-- Link to external CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- Meta for theme color on mobile -->
  <meta name="theme-color" content="#071223" />
</head>
<body>
  <!-- App container -->
  <div class="wrap" role="application" aria-labelledby="app-title">
    <!-- Left panel: add task + progress + utilities -->
    <div class="panel" aria-label="Add task panel">
      <h1 id="app-title">ðŸ“‹ Task Manager â€” Progress Tracker</h1>
      <div class="muted">Built with HTML, CSS & JavaScript â€” saves to Local Storage</div>

      <!-- Add task form -->
      <form id="addForm" class="add-form" autocomplete="off" aria-label="Add new task">
        <input id="title" type="text" placeholder="Task title (required)" required aria-required="true" />
        <textarea id="description" placeholder="Description (optional)"></textarea>

        <div class="row">
          <input id="dueDate" type="date" aria-label="Due date" />
          <select id="priority" aria-label="Priority">
            <option value="low">Low priority</option>
            <option value="medium">Medium priority</option>
            <option value="high">High priority</option>
          </select>
        </div>

        <div class="row">
          <input id="tags" type="text" placeholder="Tags (comma separated)" aria-label="Tags" />
          <button type="submit" class="btn small">Add Task</button>
        </div>
      </form>

      <!-- Progress & stats -->
      <div class="progress-wrap" aria-hidden="false">
        <div class="progress-head">
          <div class="tiny">Progress</div>
          <div id="progressPercent" class="tiny">0%</div>
        </div>
        <div class="progress-track" aria-hidden="true">
          <div id="progressBar" class="progress-bar" style="width:0%"></div>
        </div>

        <div class="stats" aria-live="polite">
          <div id="stat-total" class="stat">Total: 0</div>
          <div id="stat-active" class="stat">Active: 0</div>
          <div id="stat-completed" class="stat">Completed: 0</div>
        </div>
      </div>

      <!-- Utilities -->
      <div class="actions-row">
        <button id="btnExport" class="btn small-ghost" title="Download tasks as JSON">Export JSON</button>

        <label class="small-ghost label-file" title="Import tasks from a JSON file">
          <input id="importFile" type="file" accept="application/json" style="display:none" />
          Import JSON
        </label>

        <button id="clearCompleted" class="small-ghost" title="Remove completed tasks">Clear Completed</button>
        <button id="clearAll" class="small-ghost" title="Remove all tasks">Clear All</button>
      </div>

      <div class="muted-note">Tip: drag tasks in the list to reorder them. The order is saved locally.</div>
    </div>

    <!-- Right panel: list, filters, search -->
    <div class="tasks-panel" aria-label="Tasks">
      <div class="controls">
        <div class="filters" role="tablist" aria-label="Filters">
          <button class="filter-btn active" data-filter="all" aria-pressed="true">All</button>
          <button class="filter-btn" data-filter="active" aria-pressed="false">Active</button>
          <button class="filter-btn" data-filter="completed" aria-pressed="false">Completed</button>
        </div>

        <div class="sort-group">
          <select id="sortBy" class="small" aria-label="Sort tasks">
            <option value="order">Sort: Manual</option>
            <option value="dueAsc">Due date â–²</option>
            <option value="dueDesc">Due date â–¼</option>
            <option value="prioDesc">Priority â–²</option>
            <option value="prioAsc">Priority â–¼</option>
          </select>
          <button id="toggleShowDetails" class="filter-btn" title="Toggle description visibility">Toggle details</button>
        </div>

        <div class="search" role="search">
          <input id="searchInput" class="search-input" placeholder="Search title, description, or tags" aria-label="Search tasks" />
          <button id="clearSearch" class="filter-btn" title="Clear search">Clear</button>
        </div>
      </div>

      <!-- Task list (populated dynamically) -->
      <div id="taskList" class="list" aria-live="polite" tabindex="0">
        <!-- JS injects tasks here -->
      </div>

      <footer class="footer-actions">
        <div class="tiny footer-credit">Made for Edunet Foundation â€” Internship Project</div>
        <button id="helpBtn" class="small-ghost">Help</button>
        <!-- anchor's href will be set by JS when tasks change so it downloads the current backup -->
        <a class="btn" id="downloadBackup" href="#" download="tasks-backup.json">Quick Backup</a>
      </footer>
    </div>
  </div>

  <!-- Edit Modal (hidden by default) -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card" role="document">
      <div class="modal-head">
        <div>
          <div class="modal-title">Edit Task</div>
          <div class="tiny muted">Modify and save changes</div>
        </div>
        <button id="closeModal" class="filter-btn" aria-label="Close edit dialog">Close</button>
      </div>

      <form id="editForm" class="edit-form" style="margin-top:12px;display:grid;gap:8px">
        <input id="editTitle" type="text" required aria-required="true" />
        <textarea id="editDescription"></textarea>

        <div class="row">
          <input id="editDueDate" type="date" />
          <select id="editPriority">
            <option value="low">Low priority</option>
            <option value="medium">Medium priority</option>
            <option value="high">High priority</option>
          </select>
        </div>

        <input id="editTags" type="text" placeholder="Tags (comma separated)" />

        <div class="row modal-actions">
          <button type="button" id="deleteTaskBtn" class="small-ghost" title="Delete this task">Delete</button>
          <button type="submit" class="btn">Save</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Link to external JS (defer to ensure DOM is ready) -->
  <script src="app.js" defer></script>
</body>
</html>
